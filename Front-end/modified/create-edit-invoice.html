<!DOCTYPE html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<title>Syndash - Bootstrap4 Admin Template</title>
	<!--favicon-->
	<link rel="icon" href="assets/images/favicon-32x32.png" type="image/png" />
	<!--plugins-->
	<link href="assets/plugins/simplebar/css/simplebar.css" rel="stylesheet" />
	<link href="assets/plugins/Drag-And-Drop/dist/imageuploadify.min.css" rel="stylesheet" />
	<link href="assets/plugins/select2/css/select2.min.css" rel="stylesheet" />
	<link href="assets/plugins/select2/css/select2-bootstrap4.css" rel="stylesheet" />
	<link href="assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet" />
	<link href="assets/plugins/metismenu/css/metisMenu.min.css" rel="stylesheet" />
	<!-- loader-->
	<link href="assets/css/pace.min.css" rel="stylesheet" />
	<script src="assets/js/pace.min.js"></script>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap.min.css" />
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Roboto&display=swap" />
	<!-- Icons CSS -->
	<link rel="stylesheet" href="assets/css/icons.css" />
	<!-- App CSS -->
	<link rel="stylesheet" href="assets/css/app.css" />
	<link rel="stylesheet" href="assets/css/dark-sidebar.css" />
	<link rel="stylesheet" href="assets/css/dark-theme.css" />
	<style>
		#searchList {
			position: absolute;
			z-index: 3;
			display: none;
			box-shadow: 2px 2px gray;
		}

		.item {
			padding: 10px 15px;
		}

		#list-product {
			border: 1px solid lightgray;
			overflow-y: auto;
			max-height: 350px;
		}

		.cover {
			padding: 0;
			width: 60px;
			height: 50px;
		}

		img {
			width: 100%;
			height: 100%;
		}

		#quantity {
			width: 6%;
		}

		td:nth-child(3) {
			white-space: pre-line;
			max-width: 500px;
		}

		input[type=number] {
			width: 100%;
			text-align: center;
		}
	</style>
</head>

<body>
	<!-- wrapper -->
	<div class="wrapper">
		<!--page-wrapper-->
		<div class="page-wrapper">
			<!--page-content-wrapper-->
			<div class="page-content-wrapper">
				<div class="page-content">
					<!--breadcrumb-->
					<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
						<div class="breadcrumb-title pe-3">Nhập hàng</div>
						<div class="ps-3">
							<nav aria-label="breadcrumb">
								<ol class="breadcrumb mb-0 p-0">
									<li class="breadcrumb-item"><a href="javascript:;"><i
												class="bx bx-home-alt"></i></a>
									</li>
									<li class="breadcrumb-item active" aria-current="page">Chi tiết đơn nhập hàng</li>
								</ol>
							</nav>
						</div>
					</div>
					<!--end breadcrumb-->
					<form>
						<div class="row">
							<div class="col-12 mx-auto">
								<div class="card border-top border-0 border-4 border-primary">
									<div class="card-body p-5">
										<div class="card-title d-flex align-items-center">
											<div><i class="bx bxs-user-rectangle bx-tada me-2 fs-4"></i>
											</div>
											<h4 class="mb-0 fw-bold">Nhà cung cấp</h4>
										</div>
										<hr>
										<div class="row g-3">
											<div class="col-md-12">
												<label class="form-label">Khách hàng</label>
												<select class="single-select" size="2">
													<option value="United States">United States</option>
													<option value="United Kingdom">United Kingdom</option>
													<option value="Afghanistan">Afghanistan</option>
													<option value="Aland Islands">Aland Islands</option>
													<option value="Albania">Albania</option>
													<option value="Algeria">Algeria</option>
													<option value="American Samoa">American Samoa</option>
												</select>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-12 mx-auto">
								<div class="card border-top border-0 border-4 border-primary">
									<div class="card-body p-5">
										<div class="card-title d-flex align-items-center">
											<div><i class="bx bxs-receipt bx-tada me-2 fs-4"></i>
											</div>
											<h4 class="mb-0 fw-bold">Chi tiết đơn hàng</h4>
										</div>
										<hr>
										<div class="row g-3">
											<div class="col-md-12 p-0" style="position: relative;">
												<div class="input-group">
													<span class="input-group-text bg-transparent"><i
															class="bx bx-search"></i></span>
													<input class="form-control border-start-0 filter" type="text"
														placeholder="Thêm sản phẩm theo mã SP, tên SP" id="search">
												</div>
												<div class="w-100 mt-1" id="searchList">
													<div class="list-group" id="list-product">
														<a href="javascript:;" class="list-group-item"
															data-bs-toggle="modal" data-bs-target="#exampleModal">
															<div
																class="d-flex justify-content-center align-items-center text-success">
																<i class='bx bx-plus-circle fs-5'></i>
																<h6 class="mb-0"> Thêm sản phẩm mới</h6>
															</div>
														</a>
														<a href="javascript:;" class="list-group-item item">
															<div class="row d-flex align-items-center">
																<div class="col-6 d-flex align-items-center">
																	<div class="flex-shrink-0 cover">
																		<img
																			src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrLma5aAvx0GfOw_SpUWij6cng9eleiZoXxMyh-fsyRloR5RuxJW_KdBw5Hbup0ocbo5s&usqp=CAU">
																	</div>
																	<div class="flex-grow-1 ms-3">
																		<p class="m-0 search-info fs-6">Sách 1</p>
																		<small class="m-0 text-secondary">Mã SP: <span
																				class="search-info">021312</span></small>
																		<p class="m-0">Đơn vị: <span
																				class="text-info">Cuốn</span></p>
																	</div>
																</div>
																<div class="col-6 text-end">
																	<p class="m-0"><strong>Giá nhập:</strong> 100.000
																		VNĐ</p>
																	<p class="m-0 text-info fw-bold">Tồn: 267</p>
																</div>
															</div>
														</a>
														<a href="javascript:;" class="list-group-item item">
															<div class="row d-flex align-items-center">
																<div class="col-6 d-flex align-items-center">
																	<div class="flex-shrink-0 cover">
																		<img
																			src="https://product.hstatic.net/1000230347/product/but_bi_thien_long_tl-027__1__1024x1024.jpg">
																	</div>
																	<div class="flex-grow-1 ms-3">
																		<p class="m-0 search-info fs-6">VPP 1</p>
																		<small class="m-0 text-secondary">Mã SP: <span
																				class="search-info">923492</span></small>
																		<p class="m-0">Đơn vị: <span
																				class="text-info">Chiếc</span></p>
																	</div>
																</div>
																<div class="col-6 text-end">
																	<p class="m-0"><strong>Giá nhập:</strong> 2.000 VNĐ
																	</p>
																	<p class="m-0 text-info fw-bold">Tồn: 145</p>
																</div>
															</div>
														</a>
													</div>
												</div>
											</div>
											<div class="col-md-12">
												<table id="myTable"
													class="table table-striped table-bordered text-center">
													<thead>
														<tr>
															<th>STT</th>
															<th>Mã SP</th>
															<th>Tên SP</th>
															<th>Đơn vị</th>
															<th id="quantity">Số lượng</th>
															<th>Đơn giá</th>
															<th>Chiết khấu</th>
															<th>Đơn giá<br>(Chưa VAT)</th>
															<th>Thành tiền</th>
															<th></th>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td></td>
															<td>ABC123</td>
															<td>Sách 1</td>
															<td>Cuốn</td>
															<td class="text-center">
																<input type="number" value="5" min="1" class="num">
															</td>
															<td><span class="price">10000</span> VNĐ</td>
															<td><span class="discount">10</span>%</td>
															<td><span class="vat"></span> VNĐ</td>
															<td><span class="sum"></span> VNĐ</td>
															<td>
																<a type="button"
																	class="btn btn-close btn-danger delete"></a>
															</td>
														</tr>
														<tr>
															<td></td>
															<td>XYZ456</td>
															<td>Bút 1</td>
															<td>Chiếc</td>
															<td class="text-center">
																<input type="number" value="6" min="1" class="num">
															</td>
															<td><span class="price">5000</span> VNĐ</td>
															<td><span class="discount">10</span>%</td>
															<td><span class="vat"></span> VNĐ</td>
															<td><span class="sum"></span> VNĐ</td>
															<td>
																<a type="button"
																	class="btn btn-close btn-danger delete"></a>
															</td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="col-7"></div>
											<div class="col-5">
												<table class="table">
													<tr>
														<td>Cộng tiền hàng</td>
														<td class="text-end"><span id="totalPrice"></span> VNĐ</td>
													</tr>
													<tr>
														<td>Thuế GTGT (5%)</td>
														<td class="text-end"><span id="totalVat"></span> VNĐ</td>
													</tr>
													<tr>
														<th><strong>Tổng tiền thanh toán</strong></th>
														<td class="text-end"><strong><span id="totalPay"></span>
																VNĐ</strong></td>
													</tr>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
								style="display: none;" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<form action="">
											<div class="modal-header">
												<h5 class="modal-title" id="exampleModalLabel">Thêm sản phẩm mới</h5>
											</div>
											<div class="modal-body">
												Điền form vào đây
											</div>
											<div class="modal-footer">
												<input type="submit" class="btn btn-primary" value="Lưu">
												<button type="button" class="btn btn-secondary"
													data-bs-dismiss="modal">Hủy</button>
											</div>
										</form>
									</div>
								</div>
							</div>
							<div class="col-12 mx-auto">
								<div class="card border-top border-0 border-4 border-primary">
									<div class="card-body p-5">
										<div class="card-title d-flex align-items-center">
											<h3 class="mb-0 text-primary">Đóng gói và giao hàng</h3>
										</div>
										<hr>
										<div class="row">
											<div class="col-9"></div>
											<div class="col-3">
												<a href="" class="btn btn-danger">Hủy đơn</a>
												<a href="" class="btn btn-success">Xác nhận đã giao</a>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="col-12 mx-auto">
								<div class="card border-top border-0 border-4 border-primary">
									<div class="card-body p-5 row">
										<div class="col-9"></div>
										<div class="col-3">
											<input type="submit" class="btn btn-success" value="Sửa đơn hàng">
											<a href="" class="btn btn-secondary">Quay lại</a>
										</div>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			<!--end page-content-wrapper-->
		</div>
		<!--end page-wrapper-->
		<!--start overlay-->
		<div class="overlay toggle-btn-mobile"></div>
		<!--end overlay-->
		<!--Start Back To Top Button--> <a href="javaScript:;" class="back-to-top"><i
				class='bx bxs-up-arrow-alt'></i></a>
		<!--End Back To Top Button-->
		<!--footer -->
		<div class="footer">
			<p class="mb-0">Syndash @2020 | Developed By : <a href="https://themeforest.net/user/codervent"
					target="_blank">codervent</a>
			</p>
		</div>
		<!-- end footer -->
	</div>
	<!-- end wrapper -->
	<!--start switcher-->
	<div class="switcher-body">
		<button class="btn btn-primary btn-switcher shadow-sm" type="button" data-bs-toggle="offcanvas"
			data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling"><i
				class="bx bx-cog bx-spin"></i></button>
		<div class="offcanvas offcanvas-end shadow border-start-0 p-2" data-bs-scroll="true" data-bs-backdrop="false"
			tabindex="-1" id="offcanvasScrolling">
			<div class="offcanvas-header border-bottom">
				<h5 class="offcanvas-title" id="offcanvasScrollingLabel">Theme Customizer</h5>
				<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
			</div>
			<div class="offcanvas-body">
				<h6 class="mb-0">Theme Variation</h6>
				<hr>
				<div class="form-check form-check-inline">
					<input class="form-check-input" type="radio" name="inlineRadioOptions" id="lightmode"
						value="option1" checked>
					<label class="form-check-label" for="lightmode">Light</label>
				</div>
				<hr>
				<div class="form-check form-check-inline">
					<input class="form-check-input" type="radio" name="inlineRadioOptions" id="darkmode"
						value="option2">
					<label class="form-check-label" for="darkmode">Dark</label>
				</div>
				<hr>
				<div class="form-check form-check-inline">
					<input class="form-check-input" type="radio" name="inlineRadioOptions" id="darksidebar"
						value="option3">
					<label class="form-check-label" for="darksidebar">Semi Dark</label>
				</div>
				<hr>
				<div class="form-check form-check-inline">
					<input class="form-check-input" type="radio" name="inlineRadioOptions" id="ColorLessIcons"
						value="option3">
					<label class="form-check-label" for="ColorLessIcons">Color Less Icons</label>
				</div>
			</div>
		</div>
	</div>
	<!--end switcher-->
	<!-- JavaScript -->
	<!-- Bootstrap JS -->
	<script src="assets/js/bootstrap.bundle.min.js"></script>

	<!--plugins-->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/plugins/simplebar/js/simplebar.min.js"></script>
	<script src="assets/plugins/metismenu/js/metisMenu.min.js"></script>
	<script src="assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js"></script>
	<!--Select2 plugins-->
	<script src="assets/plugins/select2/js/select2.min.js"></script>
	<!--File-Uploader plugins-->
	<script src="assets/plugins/Drag-And-Drop/dist/imageuploadify.min.js"></script>

	<script>
		$('.single-select').select2({
			theme: 'bootstrap4',
			width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
			placeholder: $(this).data('placeholder'),
			allowClear: Boolean($(this).data('allow-clear')),
		});

		// Update invoice function
		var updateInvoice = function () {
			var num, discount, price, vat, sum, totalPrice = 0, count = 0;
			$('#myTable tr').each(function () {
				$(this).find("td:first").text(count++)
			});
			$('tbody > tr').each(function () {
				num = $(this).find($(".num")).val()
				discount = $(this).find($(".discount")).text()
				price = $(this).find($(".price")).text()
				vat = $(this).find($('.vat')).text(parseFloat(price) * (100 - parseFloat(discount)) / 100)
				sum = $(this).find($('.sum')).text(vat.text() * num)
			});
			$(".sum").each(function () {
				totalPrice += parseFloat($(this).text());
			});

			$('#totalPrice').text(totalPrice);
			$('#totalVat').text(totalPrice * 5 / 100);
			$('#totalPay').text(totalPrice * 105 / 100);
			totalPrice = 0;
		}

		// Add product function
		var addProduct = function () {
			markup = `
			<tr>
				<td></td>
				<td>ABCd123</td>
				<td>Sách 12</td>
				<td>Cuốn</td>
				<td class="text-center">
					<input type="number" value="1" min="1" class="num">
				</td>
				<td><span class="price">15000</span> VNĐ</td>
				<td><span class="discount">15</span>%</td>
				<td><span class="vat"></span> VNĐ</td>
				<td><span class="sum"></span> VNĐ</td>
				<td>
					<a class="btn btn-close btn-danger delete">
				</td>
			</tr>`;
			$('#myTable > tbody').append(markup);
		}

		$(document).ready(function () {
			updateInvoice();

			// Delete product
			$(document).on('click', '.delete', function () {
				$(this).closest('tr').remove();
				updateInvoice();
			})

			// Search product
			$('#search').on({
				'click': function () {
					$('#searchList').fadeIn('fast');
				},
				'blur': function () {
					$('#searchList').fadeOut('fast');
				},
				'keyup': function () {
					var searchText = $(this).val();
					$('#list-product > .item').each(function () {
						$(this).toggle(
							$(this).find('.search-info').text().toLowerCase().indexOf(searchText.toLowerCase()) !== -1);
					});
				}
			});

			// Click product from search to add
			$(document).on('click', '.item', function () {
				addProduct();
				updateInvoice();
				$(this).hide();
			})

			$('#myTable')
				.change(updateInvoice)
				.keyup(updateInvoice);
		});
	</script>
	<!-- App JS -->
	<script src="assets/js/app.js"></script>
</body>

</html>